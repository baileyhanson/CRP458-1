<!DOCTYPE html>
<html>
  <head>
      <title>Exercise 10 geoJSON Leaflet Map</title>
      
<meta name="description" content="LA 458/558 15a Leaflet with layer control - 2020" />
      
      <link href="../Assignment2.css" rel="stylesheet" type="text/css">
	  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" /> 
	  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
      
      
      <link rel="stylesheet" href="https://theisenm1.github.io/CRP458/Assignment2/cluster_files_dist/MarkerCluster.css" />
      <link rel="stylesheet" href="https://theisenm1.github.io/CRP458/Assignment2/cluster_files_dist/MarkerCluster.Default.css" />
      <script src="https://theisenm1.github.io/CRP458/Assignment2/cluster_files_dist/leaflet.markercluster-src.js"></script>
      
      <script src="../../geojson/ISU_Research_Farms.geojson"></script>
      <script src="../../geojson/Natural_Areas.geojson"></script>
      
      <style>
      html, body, 

          #map { height: 700px; margin: 0 auto; padding: 0; 
          z-index:999;
          } 
          
.info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #525252;
}          
                        
      </style>
	  	
  </head>
    
  <body>
    
    <div class="navbar">
            <a href="https://theisenm1.github.io/CRP458/">Home</a>
            <a href="#news">News</a>
            <div class="dropdown">
            <button class="dropbtn">Exercises and Assignments 
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
            <a href="https://theisenm1.github.io/CRP458/exercise1/">About Me</a>
            <a href="https://theisenm1.github.io/CRP458/exercise2/">Exercise 2</a>
            <a href="https://github.com/theisenm1/CRP458/blob/master/exercise3/GeoJSON%20Ag%20Drainage%20Wells.geojson" target="_blank">Exercise 3</a>
            <a href="https://theisenm1.github.io/CRP458/exercise4/#11/42.7354/-93.6791">Exercise 4</a>
            <a href="https://theisenm1.github.io/CRP458/exercise5/">Exercise 5</a>
            <a href="https://theisenm1.github.io/CRP458/exercise6/">Exercise 6</a>
            <a href="https://theisenm1.github.io/CRP458/exercise7/">Exercise 7</a>   
            <a href="https://theisenm1.github.io/CRP458/exercise8/">Exercise 8</a>  
            <a href="https://theisenm1.github.io/CRP458/exercise9/">Exercise 9</a>
            <a href="https://theisenm1.github.io/CRP458/exercise10/">Exercise 10</a>     
            <a href="https://theisenm1.github.io/CRP458/Assignment1/">Assignment 1</a>
            <a href="https://theisenm1.github.io/CRP458/Assignment2/" target="blank">Assignment 2 Project Description</a> 
            <a href="https://theisenm1.github.io/CRP458/Assignment2/Assignment2Map/" target="blank">Assignment 2 ISU Research Farms Map</a>   
                 
            </div>
        </div> 
    </div> 
      
         <h1 id="h1"><strong>ISU Research Farms Map</strong></h1>
      
<div id="map"></div>
      
      <script>
             
//Base Layers, this is where I added in baselayers that I want to use as imagery

var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});
          
var OSM = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
    maxZoom: 18
});
          
 var myFarmsLayer =  L.geoJson(myISUResearchFarms, {
    style: style,
    onEachFeature: onEachFeature
});          
          
var map = L.map('map', {
    center: new L.LatLng(42.0008, -93.7208),
    zoom: 10,
    layers: [Esri_WorldImagery, myFarmsLayer]
});          

// Overlay layers, this is where i will define my points and farms layers. I will also incorporate any functions for choropleth mapping, heat or cluster markers. 

          // farms JS         
//function getColor(d) {
    return d > 1000000 ? '#08589e' :
           d > 800000  ? '#2b8cbe' :
           d > 600000  ? '#4eb3d3' :
           d > 400000  ? '#7bccc4' :
           d > 200000  ? '#a8ddb5' :
           d > 100000  ? '#ccebc5' :
           d > 50000   ? '#e0f3db' :
                        '#f7fcf0';
}
          // This is where I start to determine how my map will be colored
//function style(feature) {
    return {
        fillColor: getColor(feature.properties.Shape_Area),
        weight: 2,
        opacity: 2.5,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.75
    };
}
          // this function allows me to hover over a polygon and get a result
//function highlightFeature(e) {
    //var layer = e.target;

    //layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });
    
    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
  info.update(layer.feature.properties);  
}  
     
    
    // this function reset the polygone when the cursor is no longer hovering
function resetHighlight(e) {
   myStatesLayer.resetStyle(e.target);
   info.update();
} 
          
function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}
          
 function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
}         
          
              
          // Natural Areas JS
var MyMarkers = L.markerClusterGroup();
          
var NaturalAreaPoints = L.geoJSON(myNaturalAreas, {
               onEachFeature: function (feature, layer) {
                layer.bindPopup(feature.properties.LandUseLan);
    }                  
});
          
          

MyMarkers.addLayer(NaturalAreaPoints);
          
          
map.addLayer(MyMarkers);
//create the map, this is where I lay out the overlay and what is added to the map. 
    
		//layer control
		var baseMaps = {
            "Esri World Imagery": Esri_WorldImagery,
            "OpenStreetMap": OSM
            
		};
       		
		var overlayMaps = {
        "ISU Research Farms": myFarmsLayer,    
        "Natural Areas": MyMarkers
		};
  
 
          L.control.layers(baseMaps, overlayMaps).addTo(map);        
          
// US Population Density Layer
          
var info = L.control();
          
info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    this._div.innerHTML = '<h4>ISU Research Farm Area</h4>' +  (props ?
        '<b>' + props.Farm_Name_ + '</b><br />' + props.Shape_Area + 'ft<sup>2</sup>'
        : 'Hover over a farm');
};

info.addTo(map);     
          




      </script>

 <footer id="feet">
         Matt Theisen March 13th, 2020 <br>
         Image obtained from <a id="SecondLink"; href="https://ortho.gis.iastate.edu/client.cgi?zoom=900&x0=469163&y0=4653689&layer=naip_2019_nc&pwidth=600&pheight=450" title="ISU GIS OrthoServer" color="green" target="blank">ISU GIS OrthoServer</a>
        </footer>     
  </body>
</html>
    